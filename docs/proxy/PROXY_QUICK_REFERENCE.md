# ä»£ç†åŠŸèƒ½å¿«é€Ÿå‚è€ƒæŒ‡å—

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. å¯ç”¨ä»£ç†
```bash
proxy                    # ä½¿ç”¨é»˜è®¤é…ç½®å¯ç”¨
proxy 127.0.0.1:7890    # ä½¿ç”¨è‡ªå®šä¹‰åœ°å€
proxy 127.0.0.1:7890 -v # å¯ç”¨å¹¶éªŒè¯è¿æ¥
```

### 2. æ£€æŸ¥çŠ¶æ€
```bash
check_proxy              # å¿«é€Ÿæ£€æŸ¥ (è¾“å‡º: âœ…/âŒ)
check_proxy -s          # æ˜¾ç¤ºè¯¦ç»†çŠ¶æ€
proxy_status            # æ˜¾ç¤ºå®Œæ•´é…ç½®ä¿¡æ¯
```

### 3. ç¦ç”¨ä»£ç†
```bash
unproxy                 # æ¸…é™¤æ‰€æœ‰ä»£ç†å˜é‡
```

---

## ğŸ“‹ å‘½ä»¤é€ŸæŸ¥è¡¨

| å‘½ä»¤ | åŠŸèƒ½ | ç¤ºä¾‹ |
|------|------|------|
| `proxy` | å¯ç”¨ä»£ç† | `proxy 127.0.0.1:7890 --verify` |
| `unproxy` | ç¦ç”¨ä»£ç† | `unproxy` |
| `check_proxy` | æ£€æŸ¥çŠ¶æ€ | `check_proxy --status` |
| `proxy_status` | è¯¦ç»†ä¿¡æ¯ | `proxy_status` |

---

## ğŸ’¡ å¸¸ç”¨åœºæ™¯

### åœºæ™¯ 1ï¼šå¯ç”¨é»˜è®¤ä»£ç†
```bash
$ proxy
âœ… ä»£ç†å·²å¯ç”¨
   åœ°å€: http://127.0.0.1:7890
   NO_PROXY: localhost,127.0.0.1,.local,*.local
```

### åœºæ™¯ 2ï¼šä½¿ç”¨ V2Ray ä»£ç†
```bash
$ proxy 127.0.0.1:10808
âœ… ä»£ç†å·²å¯ç”¨
   åœ°å€: http://127.0.0.1:10808
   NO_PROXY: localhost,127.0.0.1,.local,*.local
```

### åœºæ™¯ 3ï¼šéªŒè¯ä»£ç†è¿æ¥
```bash
$ proxy 127.0.0.1:7890 --verify
âœ… ä»£ç†å·²å¯ç”¨
   åœ°å€: http://127.0.0.1:7890
   NO_PROXY: localhost,127.0.0.1,.local,*.local

âœ… 127.0.0.1:7890 è¿æ¥æ­£å¸¸
```

### åœºæ™¯ 4ï¼šæŸ¥çœ‹å®Œæ•´ä»£ç†é…ç½®
```bash
$ proxy_status

ğŸ“Š ä»£ç†çŠ¶æ€ä¿¡æ¯ï¼š
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ğŸŸ¢ ä»£ç†çŠ¶æ€: å·²å¯ç”¨
   http_proxy: http://127.0.0.1:7890
   https_proxy: http://127.0.0.1:7890
   all_proxy: http://127.0.0.1:7890

âš™ï¸  é»˜è®¤é…ç½®:
   ä»£ç†åœ°å€: 127.0.0.1:7890
   NO_PROXY: localhost,127.0.0.1,.local,*.local

ğŸ” ä»£ç†æœåŠ¡å¯ç”¨æ€§æ£€æµ‹:
   âœ… 127.0.0.1:7890 è¿æ¥æ­£å¸¸
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
```

### åœºæ™¯ 5ï¼šç¦ç”¨ä»£ç†
```bash
$ unproxy
âŒ ä»£ç†å·²ç¦ç”¨
```

---

## âš™ï¸ é…ç½®æ–‡ä»¶ (~/.proxy_config)

### é»˜è®¤å†…å®¹
```bash
# Proxy Configuration File
PROXY_ADDRESS=127.0.0.1:7890
NO_PROXY_LIST=localhost,127.0.0.1,.local,*.local
PROXY_TIMEOUT=3
```

### ä¿®æ”¹é…ç½®
```bash
# ç¼–è¾‘é…ç½®æ–‡ä»¶
nano ~/.proxy_config

# æ”¹ä¸ºä½¿ç”¨ V2Ray
PROXY_ADDRESS=127.0.0.1:10808

# ä¿å­˜åï¼Œä¸‹æ¬¡ä½¿ç”¨ proxy å‘½ä»¤ä¼šåº”ç”¨æ–°é…ç½®
proxy    # ä½¿ç”¨æ–°çš„ 10808 ç«¯å£
```

---

## ğŸ” å‘½ä»¤é€‰é¡¹è¯¦è§£

### `proxy` å‘½ä»¤
```bash
proxy [host:port] [--verify|-v]

å‚æ•°è¯´æ˜ï¼š
  [host:port]  å¯é€‰ï¼Œè‡ªå®šä¹‰ä»£ç†åœ°å€ (e.g., 127.0.0.1:7890)
  --verify     å¯é€‰ï¼ŒéªŒè¯ä»£ç†æœåŠ¡æ˜¯å¦å¯ç”¨
  -v           åŒä¸Šï¼Œç®€å†™å½¢å¼

ç¤ºä¾‹ï¼š
  proxy                           # ä½¿ç”¨é…ç½®æ–‡ä»¶
  proxy 127.0.0.1:7890            # è‡ªå®šä¹‰åœ°å€
  proxy 192.168.1.1:1080 --verify # è‡ªå®šä¹‰åœ°å€å¹¶éªŒè¯
```

### `check_proxy` å‘½ä»¤
```bash
check_proxy [--status|-s]

å‚æ•°è¯´æ˜ï¼š
  --status     æ˜¾ç¤ºè¯¦ç»†çŠ¶æ€ä¿¡æ¯
  -s           åŒä¸Šï¼Œç®€å†™å½¢å¼

ç¤ºä¾‹ï¼š
  check_proxy         # å¿«é€Ÿæ£€æŸ¥
  check_proxy -s      # æ˜¾ç¤ºè¯¦ç»†ä¿¡æ¯
```

### `proxy_status` å‘½ä»¤
```bash
proxy_status

åŠŸèƒ½ï¼šæ˜¾ç¤ºå®Œæ•´çš„ä»£ç†é…ç½®å’Œå¯ç”¨æ€§æ£€æµ‹ç»“æœ

è¾“å‡ºåŒ…æ‹¬ï¼š
  - å½“å‰ä»£ç†çŠ¶æ€ (å·²å¯ç”¨/æœªå¯ç”¨)
  - æ‰€æœ‰ä»£ç†ç¯å¢ƒå˜é‡å€¼
  - é»˜è®¤é…ç½®ä¿¡æ¯
  - ä»£ç†æœåŠ¡å¯ç”¨æ€§æ£€æµ‹ç»“æœ
```

### `unproxy` å‘½ä»¤
```bash
unproxy

åŠŸèƒ½ï¼šæ¸…é™¤æ‰€æœ‰ä»£ç†ç›¸å…³ç¯å¢ƒå˜é‡

æ¸…é™¤å˜é‡ï¼š
  - http_proxy / HTTP_PROXY
  - https_proxy / HTTPS_PROXY
  - all_proxy / ALL_PROXY
  - ftp_proxy / FTP_PROXY
  - no_proxy / NO_PROXY
```

---

## ğŸ†˜ æ•…éšœæ’é™¤

### é—®é¢˜ 1ï¼šä»£ç†è¿æ¥å¤±è´¥
```bash
# éªŒè¯ä»£ç†åœ°å€
$ proxy 127.0.0.1:7890 --verify
âŒ 127.0.0.1:7890 è¿æ¥è¶…æ—¶æˆ–æ‹’ç»

# è§£å†³æ–¹æ¡ˆï¼š
# 1. æ£€æŸ¥ä»£ç†æœåŠ¡æ˜¯å¦è¿è¡Œ
# 2. ç¡®è®¤ä»£ç†åœ°å€å’Œç«¯å£æ­£ç¡®
# 3. æ£€æŸ¥é˜²ç«å¢™è®¾ç½®
```

### é—®é¢˜ 2ï¼šç¯å¢ƒå˜é‡æœªè®¾ç½®
```bash
# æ£€æŸ¥ä»£ç†æ˜¯å¦å¯ç”¨
$ check_proxy
âŒ ä»£ç†æœªå¯ç”¨

# è§£å†³æ–¹æ¡ˆï¼š
proxy 127.0.0.1:7890    # é‡æ–°å¯ç”¨ä»£ç†
```

### é—®é¢˜ 3ï¼šé…ç½®æ–‡ä»¶ä¸å­˜åœ¨
```bash
# é¦–æ¬¡ä½¿ç”¨ä¼šè‡ªåŠ¨åˆ›å»º
$ proxy
# ~/.proxy_config ä¼šè¢«è‡ªåŠ¨åˆ›å»º
# å¦‚éœ€ä¿®æ”¹é»˜è®¤å€¼ï¼Œç¼–è¾‘è¯¥æ–‡ä»¶
```

### é—®é¢˜ 4ï¼šæŸ¥çœ‹å¸®åŠ©ä¿¡æ¯
```bash
# æŸ¥çœ‹æ‰€æœ‰ä»£ç†å‘½ä»¤å¸®åŠ©
zsh_help å®ç”¨å·¥å…·

# æŸ¥çœ‹å…·ä½“å‘½ä»¤å¸®åŠ©
zsh_help proxy
zsh_help check_proxy
zsh_help proxy_status
zsh_help unproxy
```

---

## ğŸ“š ç›¸å…³å‘½ä»¤

### æŸ¥çœ‹ç¯å¢ƒå˜é‡
```bash
# æŸ¥çœ‹ä»£ç†ç›¸å…³ç¯å¢ƒå˜é‡
echo $http_proxy
echo $https_proxy
echo $no_proxy

# æˆ–æŸ¥çœ‹æ‰€æœ‰ä»£ç†å˜é‡
env | grep -i proxy
```

### æµ‹è¯•ä»£ç†è¿æ¥
```bash
# ä½¿ç”¨ curl æµ‹è¯•ä»£ç†
curl -x http://127.0.0.1:7890 https://www.google.com

# ä½¿ç”¨ wget æµ‹è¯•ä»£ç†
wget -e http_proxy=127.0.0.1:7890 https://www.google.com
```

### æ£€æŸ¥ä»£ç†å¯ç”¨æ€§
```bash
# å°è¯•è¿æ¥ä»£ç†æœåŠ¡
timeout 3 bash -c "echo > /dev/tcp/127.0.0.1/7890" && echo "Connected" || echo "Failed"
```

---

## ğŸ¯ æœ€ä½³å®è·µ

### 1. å®šæœŸæ£€æŸ¥ä»£ç†çŠ¶æ€
```bash
# å·¥ä½œå¼€å§‹æ—¶æ£€æŸ¥
check_proxy --status

# å‘ç°é—®é¢˜æ—¶æŸ¥çœ‹è¯¦ç»†ä¿¡æ¯
proxy_status
```

### 2. éªŒè¯ä»£ç†é…ç½®
```bash
# ä¿®æ”¹é…ç½®åéªŒè¯
proxy 127.0.0.1:7890 --verify
```

### 3. ä½¿ç”¨é…ç½®æ–‡ä»¶ç®¡ç†å¤šä¸ªä»£ç†
```bash
# ~/.proxy_config
# å¿«é€Ÿä¿®æ”¹ PROXY_ADDRESSï¼Œé‡æ–°å¯ç”¨å³å¯
PROXY_ADDRESS=127.0.0.1:7890   # Clash
PROXY_ADDRESS=127.0.0.1:10808  # V2Ray
```

### 4. è„šæœ¬ä¸­ä½¿ç”¨ä»£ç†
```bash
# è„šæœ¬å¼€å§‹
proxy 127.0.0.1:7890

# æ‰§è¡Œéœ€è¦ä»£ç†çš„å‘½ä»¤
curl https://api.example.com

# è„šæœ¬ç»“æŸ
unproxy
```

---

## ğŸ”— å…³é”®æ–‡ä»¶

| æ–‡ä»¶ | ç”¨é€” |
|------|------|
| `~/.proxy_config` | ä»£ç†é…ç½®æ–‡ä»¶ |
| `zsh-functions/utils.zsh` | ä»£ç†åŠŸèƒ½å®ç° |
| `zsh-functions/help.zsh` | å¸®åŠ©ç³»ç»Ÿ |
| `PROXY_OPTIMIZATION.md` | è¯¦ç»†ä¼˜åŒ–æ–‡æ¡£ |

---

## ğŸ“ å¿«é€Ÿå¸®åŠ©

```bash
# æŸ¥çœ‹æ‰€æœ‰å‘½ä»¤
zsh_help

# æŸ¥çœ‹ä»£ç†ç›¸å…³å‘½ä»¤
zsh_help å®ç”¨å·¥å…·

# æŸ¥çœ‹å…·ä½“å‘½ä»¤å¸®åŠ©
proxy --help
check_proxy --help
proxy_status --help
unproxy --help

# æˆ–
zsh_help proxy
zsh_help check_proxy
zsh_help proxy_status
zsh_help unproxy
```

---

## ğŸ“Š ç‰ˆæœ¬ä¿¡æ¯

- **ç‰ˆæœ¬**: 2.1
- **æ›´æ–°æ—¥æœŸ**: 2025-10-17
- **ç»´æŠ¤è€…**: Development Team
- **çŠ¶æ€**: âœ… ç”Ÿäº§å°±ç»ª
